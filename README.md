# 暗号資産裁定取引監視ツール

## 概要

このツールは、複数の暗号資産取引所（Coincheck、bitFlyer、bitbank）間の価格差を監視し、裁定取引の機会を検出して記録するための監視システムです。リアルタイムで市場データを取得し、手数料を考慮した上で収益の可能性がある取引経路を特定します。

## 特徴

- **リアルタイム監視**: 1秒ごとに3つの主要取引所（Coincheck、bitFlyer、bitbank）の板情報を取得
- **自動裁定機会検出**: 取引所間の価格差に基づいて収益の可能性がある取引経路を自動で検出
- **手数料を考慮した分析**: 取引手数料と送金手数料を考慮した実質的な収益率を計算
- **定期的なログ記録**: 裁定取引機会を記録し、1分ごとにCSVファイルとして出力
- **視覚的なインターフェース**: 収益の可能性がある取引経路を色分けして表示

## 対応通貨

現在、以下の暗号資産に対応しています：

- BTC (ビットコイン)
- ETH (イーサリアム)
- XRP (リップル)

## 必要条件

- Ruby 2.5以上
- インターネット接続環境

## インストール方法

1. このリポジトリをクローンします：

```bash
git clone https://github.com/yourusername/crypto-arbitrage-monitor.git
cd crypto-arbitrage-monitor
```

2. 依存ライブラリをインストールします（標準ライブラリのみ使用しているため、追加のgemは不要です）：

```bash
# 特に必要なし - すべて標準ライブラリを使用
```

## 使い方

### 基本的な監視の開始

以下のコマンドを実行して監視を開始します：

```bash
ruby crypto_arbitrage_logger.rb
```

### 監視中の操作

- 画面は1秒ごとに更新されます
- 収益の可能性がある取引経路は緑色で強調表示されます
- `Ctrl+C`で監視を終了できます

### ログファイル

- 裁定取引機会は自動的に記録され、1分ごとに`logs`フォルダ内にCSVファイルとして保存されます
- ログファイル名の形式: `arbitrage_YYYYMMDD_HHMMSS.csv`
- CSVには以下の情報が含まれます：
  - 時刻
  - 通貨
  - 購入取引所
  - 売却取引所
  - 収益率(%)
  - 各取引所の最良気配値（買値/売値）

## カスタマイズ

### 監視間隔の変更

`sleep 1`の値を変更することで、データ更新の間隔を調整できます。ただし、短すぎる間隔に設定すると、APIレート制限に達する可能性があります。

### 手数料の調整

各取引所の実際の手数料に合わせて、以下の定数を調整できます：

```ruby
COINCHECK_MAKER_FEE = 0.0  # Coincheckのメイカー手数料
COINCHECK_TAKER_FEE = 0.1  # Coincheckのテイカー手数料
BITFLYER_MAKER_FEE = 0.0   # bitFlyerのメイカー手数料
BITFLYER_TAKER_FEE = 0.1   # bitFlyerのテイカー手数料
BITBANK_MAKER_FEE = 0.0    # bitbankのメイカー手数料
BITBANK_TAKER_FEE = 0.1    # bitbankのテイカー手数料
TRANSFER_FEE = 0.1         # 送金手数料の概算
```

### ログ出力間隔の変更

ログファイルの出力間隔を変更するには、以下の定数を調整します：

```ruby
LOG_INTERVAL = 60 # 60秒（1分）ごとにログを出力
```

## 注意事項

- このツールは情報提供を目的としており、実際の取引を自動化するものではありません。
- 暗号資産市場は非常に変動が激しく、検出された裁定機会が実際に利益をもたらす保証はありません。
- 取引所のAPIレート制限に注意してください。短い間隔で頻繁にリクエストを送ると、一時的にAPIアクセスがブロックされる可能性があります。
- このツールを使用した取引によって生じた損失について、開発者は一切責任を負いません。

## ライセンス

MIT

## 貢献

プルリクエストや機能提案は大歓迎です。大きな変更を加える前には、まずissueを作成して議論してください。

## 謝辞

このプロジェクトは以下の取引所の公開APIを使用しています：
- [Coincheck](https://coincheck.com/ja/documents/exchange/api)
- [bitFlyer](https://lightning.bitflyer.com/docs)
- [bitbank](https://github.com/bitbankinc/bitbank-api-docs)

それぞれの取引所のAPI利用条件に従って使用してください。
